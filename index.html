<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡å­—ç½®æ›ver.Î³</title>
</head>
<body>
    <div>
        <header>
            <h1>æ–‡å­—è‡ªå‹•ç½®æ›ğ‘‰ğ‘’ğ‘Ÿ.ğ›¿</h1>
        </header>
        <p>
            <textarea type="text" id="input_place" placeholder="ä»»æ„ã®æ–‡å­—åˆ—" style="width:200px;height:100px;"></textarea>
            <input type="button" id="button" class="btn" value="ğ¶ğ‘œğ‘›ğ‘£ğ‘’ğ‘Ÿğ‘¡" onclick="convert_a_g_e()" style="width:70px;height:30px;">
        </p>
        <p>
            <textarea id="output_place" placeholder="å‡ºåŠ›çµæœ" style="width:200px;height:100px;"></textarea>
            <input type="button" id="copybtn" class="btn" value="ğ¶ğ‘œğ‘ğ‘¦" onclick="copy()" style="width:70px;height:30px;">
        </p>
        <p>
            <input type="button" id="clrbtn" class="btn" value="ğ¶ğ‘™ğ‘’ğ‘ğ‘Ÿ" onclick="clr()" style="width:50px;height:30px;">
        </p>
        <script type="text/javascript">
            //ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆãƒ»ã‚®ãƒªã‚·ãƒ£æ–‡å­—ã‚’ã‚¤ã‚¿ãƒªãƒƒã‚¯ä½“ã«å¤‰æ›
            function convert(input_1){                
                const array_1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzÎ‘Î’Î“Î”Î•Î–Î—Î˜Î™ÎšÎ›ÎœÎÎÎŸÎ Î¡Î£Î¤Î¥Î¦Î§Î¨Î©Î±Î²Î³Î´ÎµÎ¶Î·Î¸Î¹ÎºÎ»Î¼Î½Î¾Î¿Ï€ÏÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰0123456789";
                const array_2 = new Array ("ğ´", "ğµ", "ğ¶", "ğ·", "ğ¸", "ğ¹", "ğº", "ğ»", "ğ¼", "ğ½", "ğ¾", "ğ¿", "ğ‘€", "ğ‘", "ğ‘‚", "ğ‘ƒ", "ğ‘„", "ğ‘…", "ğ‘†", "ğ‘‡", "ğ‘ˆ", "ğ‘‰", "ğ‘Š", "ğ‘‹", "ğ‘Œ", "ğ‘", "ğ‘", "ğ‘", "ğ‘", "ğ‘‘", "ğ‘’", "ğ‘“", "ğ‘”", "â„", "ğ‘–", "ğ‘—", "ğ‘˜", "ğ‘™", "ğ‘š", "ğ‘›", "ğ‘œ", "ğ‘", "ğ‘", "ğ‘Ÿ", "ğ‘ ", "ğ‘¡", "ğ‘¢", "ğ‘£", "ğ‘¤", "ğ‘¥", "ğ‘¦", "ğ‘§", "ğ›¢", "ğ›£", "ğ›¤", "ğ›¥", "ğ›¦", "ğ›§", "ğ›¨", "ğ›©", "ğ›ª", "ğ›«", "ğ›¬", "ğ›­", "ğ›®", "ğ›¯", "ğ›°", "ğ›±", "ğ›²", "ğ›´", "ğ›µ", "ğ›¶", "ğ›·", "ğ›¸", "ğ›¹", "ğ›º", "ğ›¼", "ğ›½", "ğ›¾", "ğ›¿", "ğœ€", "ğœ", "ğœ‚", "ğœƒ", "ğœ„", "ğœ…", "ğœ†", "ğœ‡", "ğœˆ", "ğœ‰", "ğœŠ", "ğœ‹", "ğœŒ", "ğœ", "ğœ", "ğœ", "ğœ‘", "ğœ’", "ğœ“", "ğœ”", "ğŸ¶", "ğŸ·", "ğŸ¸", "ğŸ¹", "ğŸº", "ğŸ»", "ğŸ¼", "ğŸ½", "ğŸ¾", "ğŸ¿");
                var res = new Array(input_1.length);
                for(var i = 0; i < input_1.length; i++){
                    res[i] = input_1[i];
                    var idx = array_1.indexOf(input_1[i]);
                    if(idx >= 0){
                        res[i] = array_2[idx];
                    }
                }
                return res.join("");
            }

            //å…¥åŠ›æ–‡å­—åˆ—ã‹ã‚‰æŒ‡æ•°ã‚’æŠ½å‡ºã—ã€ä¸Šä»˜ãæ–‡å­—ã«å¤‰æ›ã™ã‚‹
            function exponent_replace(input_2){
                var e_p = input_2.indexOf("^");
                //console.log(e_p);
                if(e_p >= 0){
                    //å¤‰æ›å‰ã®æŒ‡æ•°ã‚’æŠ½å‡ºã—ã€é…åˆ—array_exponentsã«æ ¼ç´
                    var array_exponents = [];
                    for(var i = 1; i < input_2.length - e_p; i++){
                        if(isNaN(input_2.substr(e_p + i, 1).value) == true){
                            array_exponents.push(input_2.substr(e_p + i, 1));
                        }
                    }
                    //æŠ½å‡ºã•ã‚ŒãŸæŒ‡æ•°ã®æ ¼ç´ã•ã‚Œã‚‹é…åˆ—array_exponentså†…ã®è¦ç´ ã‚’çµåˆã—ã€å¤‰æ•°exponentsã«ä»£å…¥
                    var exponents = array_exponents.join("");
                    //console.log(exponents);
                    //æŠ½å‡ºã•ã‚ŒãŸæŒ‡æ•°ã‚’ä¸Šä»˜ãæ–‡å­—ã«é–¢æ•°convertion(exponents)ã‚’ç”¨ã„ã¦å¤‰æ›ã—ã€å¤‰æ•°exponents_extractedã«æ ¼ç´
                    var exponents_replaced = convertion_2(exponents);
                    return exponents_replaced
                }
                
            }
            var test = "(x^2)^2+2x^2+1-x^2";
            console.log("test:" + test);
            console.log("er():" + exponent_replace(test));
            //æŠ½å‡ºã•ã‚ŒãŸæŒ‡æ•°ã‚’ä¸Šä»˜ãæ–‡å­—ã«å¤‰æ›ãƒ»é–¢æ•°exponent_replace(input_2)å†…ã§ä½¿ç”¨
            /*function convertion(extracted){
                var extracted_0 = extracted.replaceAll("0", "â°");
                var extracted_1 = extracted_0.replaceAll("1", "Â¹");
                var extracted_2 = extracted_1.replaceAll("2", "Â²");
                var extracted_3 = extracted_2.replaceAll("3", "Â³");
                var extracted_4 = extracted_3.replaceAll("4", "â´");
                var extracted_5 = extracted_4.replaceAll("5", "âµ");
                var extracted_6 = extracted_5.replaceAll("6", "â¶");
                var extracted_7 = extracted_6.replaceAll("7", "â·");
                var extracted_8 = extracted_7.replaceAll("8", "â¸");
                var extracted_9 = extracted_8.replaceAll("9", "â¹");
                return extracted_9
            }*/
            function convertion_2(extracted){
                var extracted_0 = extracted.replaceAll("^0", "â°");
                var extracted_1 = extracted_0.replaceAll("^1", "Â¹");
                console.log(extracted_1);
                var extracted_2 = extracted_1.replaceAll("^2", "Â²");
                var extracted_3 = extracted_2.replaceAll("^3", "Â³");
                var extracted_4 = extracted_3.replaceAll("^4", "â´");
                var extracted_5 = extracted_4.replaceAll("^5", "âµ");
                var extracted_6 = extracted_5.replaceAll("^6", "â¶");
                var extracted_7 = extracted_6.replaceAll("^7", "â·");
                var extracted_8 = extracted_7.replaceAll("^8", "â¸");
                var extracted_9 = extracted_8.replaceAll("^9", "â¹");
                console.log(extracted_9);
                return extracted_9
            }

            //å¤‰æ•°valueå†…ã«å«ã¾ã‚Œã‚‹å†ªä¹—æ¼”ç®—å­ã®ä½ç½®ã‚’èª¿ã¹ã‚‹
            function where_is_exponentiation(value){
                //å¤‰æ•°valueå†…ã«å«ã¾ã‚Œã‚‹å†ªä¹—æ¼”ç®—å­ã®å€‹æ•°ã‚’èª¿ã¹ã‚‹
                var hat_count = value.match(/\^/g).length;
                //å†ªä¹—æ¼”ç®—å­ã®ä½ç½®ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®(è¦ç´ æ•°)=(å†ªä¹—æ¼”ç®—å­ã®å€‹æ•°)ã§ã‚ã‚‹é…åˆ—array_place_countã‚’å®£è¨€
                var array_place_count = [];
                //å†ªä¹—æ¼”ç®—å­ã®ä½ç½®ã‚’èª¿ã¹ã€ä½•æ–‡å­—ç›®ã‹ã‚’é…åˆ—array_place_countã«æ ¼ç´
                //console.log(value.indexOf("^"));
                for(var p = 1; p <= value.length; p++){
                    array_place_count.push(value.indexOf("^", p));
                }
                //é…åˆ—array_place_countå†…ã§ã®é‡è¤‡ã‚’æ’é™¤
                var where_exponentiation_0 = [...new Set(array_place_count)]
                //ãƒ¡ã‚½ãƒƒãƒ‰.indexOfã§è¿”ã•ã‚ŒãŸ-1ã‚’æ’é™¤
                var where_exponentiation = where_exponentiation_0.filter(function(value){
                    return value >= 0;
                })
                return where_exponentiation
            }

            /*function convert_a_g_e(){
                var input = "clr^" + document.getElementById("input_place").value;
                console.log(input);
                //console.log(exponent_replace(input));
                //console.log(exponent_replace(input).replaceAll("^", ""));
                var output = convert(exponent_replace(input).replaceAll("^", ""));
                output_place.innerHTML = output
            }*/
            function convert_a_g_e(){
                var input = document.getElementById("input_place").value;
                var output = convert(convertion_2(input));
                output_place.innerHTML = output
            }
            function clr(){
                window.location.reload();
            }

            function copy(){
            var copy_target = document.getElementById("output_place");
            copy_target.select();
            document.execCommand("Copy");
            alert("ğ¶ğ‘œğ‘ğ‘–ğ‘’ğ‘‘ï¼š" + copy_target.value);
            }
        </script>
        <p>
            ğ‘‰ğ‘’ğ‘Ÿ.ğ›¿ï¼š
            <ol>
                <li>å†ªä¹—æ¼”ç®—å­ã®å¾Œã«é€£ç¶šã™ã‚‹æ•´æ•°ã‚’ä¸Šä»˜ãæ–‡å­—ã®æŒ‡æ•°ã«å¤‰æ›ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ <br>ä¾‹:(a+b+c)^10â†’(ğ‘+ğ‘+ğ‘)Â¹â°</li>
                <li>0~9ã®æ•°å­—ã‚’Mathematical Monospaceä½“(ğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¼ğŸ½ğŸ¾ğŸ¿)ã«å¤‰æ›ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ </li>
                <li>Clearãƒœã‚¿ãƒ³ã€Copyãƒœã‚¿ãƒ³ã‚’è¿½åŠ </li>
            </ol>
        </p>
    </div>
</body>
</html>